\documentclass{article}
\usepackage[utf8]{inputenc} 
\usepackage[T2A]{fontenc} 
\usepackage{trkv}
\usepackage{etoolbox} 

\def\prettylist{$=\!$[\k$\to$\v]$\!=\!$}
\newPairParser{\getPrettyPair}{\prettylist}
\newPairsParser{\getPrettyPairs}{\prettylist}
\def\testlist{}
% for unknown reasons, etoolbox expands braces around key
% i checked in the log, this is not my problem
%
% however, it is a problem anly if you want a key
%+ with spaces around or with pair delimiter
% Use {{..}} then
\forcsvlist{\listadd\testlist}{{formulas, math, etc}
=
$b$  ,                   {{  c .= lf}}
              =
{d<<=>>k l}, \TeX    =\TeX}

\begin{document}
keys: \forlistloop{$|$\getKey}{\testlist}$|$ \par
values: \forlistloop{$|$\getVal}{\testlist}$|$ \par
pairs: \forlistloop{\getPrettyPair}{\testlist} \par
\getPrettyPairs{hek = \def\hek#1{{\bf#1}}\hek{kek}}\par
\storePair{/kek/color/.ini = deep red with bits of blue}
\fbox{\getByKey{/kek/color/.ini}}\par
\storePairs{sigma = $\sigma$, exit = no way, coding in = \TeX}
\fbox{\getByKeys{sigma,exit, coding in}} \par
\fbox{\getKey{can i haz = ##1##2}}
\storePair{a func! = it body! like: ##1##2}%
\edef\ttt#1#2{\getByKey{a func!}}\fbox{\ttt {$\int$} {{{$\sum$}}}}

% And a stressful one
\getPrettyPairs{aa,bb, =aaa, \# =jjj}

% multitoken separator is supported, to
\setPairSep{->}
\setListSep{;}
\getPrettyPairs{ with `=' sign->can store them!; and this-> too}

\storePairDef{sigma-> $\sigma\!\sigma$}
\storePairsDef{sigme -> $\sigma\!e$; sigmo -> $\sigma\!o$}
\setPairSep{:}
\getPairsByKey{sigme; sigma; sigmo}

\storePair{
 and
 even
 empty
 one: }  
\par

\input{trkv.def}

\newPairsParser{\getKeysList}{
  \expandafter\listgadd\expandafter\keylist \expandafter{\romannumeral-`X\k}
}
\def\keylist{}
\getPrettyPairs{$\sin'$=$\cos$, $\tan'$=$\frac{1}{\cos^2}$}
\getKeysList{$\sin'$=$\cos$, $\tan'$ = $\frac{1}{\cos^2}$}
\show\keylist

\storePairDef{note=foot}
\storePairs{
  notes/foot   = 0, 
  notes/end    = 1, 
  notes/margin = 2 
}
\getByKey{note}
\edef\foo{
\noexpand\toks0={\getByKey{note}}
}\foo
% \showthe\toks0
% \def \defhelper#1{
%   \getByKey{notes/#1}
% }
% \expandafter \defhelper \getByKey{note}


\end{document}
% TEX program = TEXINPUTS=../..//:: pdflatex
